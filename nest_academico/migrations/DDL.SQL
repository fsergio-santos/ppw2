DROP TABLE ALUNO_AVALIACAO;
DROP TABLE AVALIACAO;
DROP TABLE MATRICULA;
DROP TABLE DISCIPLINA;
DROP TABLE PROFESSOR;
DROP TABLE ALUNO;
DROP TABLE USUARIO;
DROP TABLE CIDADE;
DROP TABLE DEPARTAMENTO;

CREATE TABLE DEPARTAMENTO (ID_DEPARTAMENTO INTEGER NOT NULL CONSTRAINT PK_DEPARTAMENTO PRIMARY KEY,
                    COD_DEPARTAMENTO VARCHAR2(10) UNIQUE NOT NULL, 
                    NOME_DEPARTAMENTO VARCHAR2(50),
		                CREATED_AT DATE DEFAULT SYSDATE,
                    UPDATED_AT DATE DEFAULT SYSDATE);

CREATE TABLE CIDADE (ID_CIDADE INTEGER NOT NULL CONSTRAINT PK_CIDADE PRIMARY KEY,
                    COD_CIDADE VARCHAR2(10) UNIQUE NOT NULL, 
                    NOME_CIDADE VARCHAR2(50),
		                CREATED_AT DATE DEFAULT SYSDATE,
                    UPDATED_AT DATE DEFAULT SYSDATE);

CREATE TABLE USUARIO (ID_USUARIO INTEGER NOT NULL CONSTRAINT PK_USUARIO PRIMARY KEY,
                      COD_USUARIO VARCHAR2(10) UNIQUE NOT NULL, 
                      NOME_USUARIO VARCHAR2(50),
                      EMAIL VARCHAR2(100),
                      SENHA VARCHAR2(20),
                      FOTO VARCHAR2(200),
		                  TIPO INTEGER DEFAULT 1 NOT NULL, --1(PROFESSOR), 2(ALUNO)
                      ID_CIDADE INTEGER NOT NULL,
                      CONSTRAINT FK_USUARIO_CIDADE FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE,
		                  ATIVO INTEGER DEFAULT 1,
		                  CREATED_AT DATE DEFAULT SYSDATE,
                      UPDATED_AT DATE DEFAULT SYSDATE);  
                   

CREATE TABLE PROFESSOR (ID_PROFESSOR INTEGER NOT NULL CONSTRAINT PK_PROFESSOR PRIMARY KEY,
                      COD_PROFESSOR VARCHAR2(10) UNIQUE NOT NULL, 
                      NOME_PROFESSOR VARCHAR2(50),
                      ID_USUARIO INTEGER NOT NULL,
                      CONSTRAINT FK_PROFESSOR_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO,
		                  CREATED_AT DATE DEFAULT SYSDATE,
                      UPDATED_AT DATE DEFAULT SYSDATE);  
                
CREATE TABLE ALUNO (ID_ALUNO INTEGER NOT NULL CONSTRAINT PK_ALUNO PRIMARY KEY,
                      COD_ALUNO VARCHAR2(10) UNIQUE NOT NULL, 
                      NOME_ALUNO VARCHAR2(50),
                      IDADE INTEGER,
                      ID_USUARIO INTEGER NOT NULL,
                      CONSTRAINT FK_ALUNO_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO,
		                  CREATED_AT DATE DEFAULT SYSDATE,
                      UPDATED_AT DATE DEFAULT SYSDATE);                        

CREATE TABLE DISCIPLINA (ID_DISCIPLINA INTEGER NOT NULL CONSTRAINT PK_DISCIPLINA PRIMARY KEY,
                      COD_DISCIPLINA VARCHAR2(10) UNIQUE NOT NULL, 
                      NOME_DISCIPLINA VARCHAR2(50),
                      ID_PROFESSOR INTEGER NOT NULL,
                      CONSTRAINT FK_DISC_PROFESSOR FOREIGN KEY (ID_PROFESSOR) REFERENCES PROFESSOR,
		                  CREATED_AT DATE DEFAULT SYSDATE,
                      UPDATED_AT DATE DEFAULT SYSDATE);  
                      
CREATE TABLE MATRICULA (ID_MATRICULA INTEGER NOT NULL CONSTRAINT PK_MATRICULA PRIMARY KEY,
                      PERIODO INTEGER,
                      ID_ALUNO INTEGER NOT NULL,
                      ID_DISCIPLINA INTEGER NOT NULL,                      
                      CONSTRAINT FK_MATRICULA_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES ALUNO, 
                      CONSTRAINT FK_MATRICULA_DISC FOREIGN KEY (ID_DISCIPLINA) REFERENCES DISCIPLINA,                      
                      CONSTRAINT UN_MATRICULA UNIQUE(ID_ALUNO, ID_DISCIPLINA),
		                  CREATED_AT DATE DEFAULT SYSDATE,
                      UPDATED_AT DATE DEFAULT SYSDATE);

CREATE TABLE AVALIACAO (ID_AVALIACAO INTEGER NOT NULL CONSTRAINT PK_AVALIACAO PRIMARY KEY,
                      COD_AVALIACAO VARCHAR2(20) UNIQUE NOT NULL, 
                      DESCRICAO VARCHAR2(50),          
                      ID_DISCIPLINA INTEGER NOT NULL,
                      CONSTRAINT FK_AVAL_DISC FOREIGN KEY (ID_DISCIPLINA) REFERENCES DISCIPLINA,
		                  CREATED_AT DATE DEFAULT SYSDATE,
                      UPDATED_AT DATE DEFAULT SYSDATE);  
                    
CREATE TABLE ALUNO_AVALIACAO (ID_ALUNO_AVALIACAO INTEGER NOT NULL CONSTRAINT PK_ALUNO_AVAL PRIMARY KEY,
                              NOTA NUMBER(3,1),
                              ID_ALUNO INTEGER NOT NULL,
                              ID_AVALIACAO INTEGER NOT NULL,
                              CONSTRAINT FK_AL_AVAL_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES ALUNO, 
                              CONSTRAINT FK_AL_AVAL_AVALIACAO FOREIGN KEY (ID_AVALIACAO) REFERENCES AVALIACAO,
                              CONSTRAINT UN_ALUNO_AVALIACAO UNIQUE(ID_ALUNO, ID_AVALIACAO),
		                          CREATED_AT DATE DEFAULT SYSDATE,
                              UPDATED_AT DATE DEFAULT SYSDATE);                                                            